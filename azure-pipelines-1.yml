trigger:
- none

pool: "agent5"
 
 
jobs:
-  job: "terraform_init"
   displayName: "terraform init"
   steps:
   - task: TerraformInstaller@1
     displayName: "terraform install"
     inputs:
       terraformVersion: 'latest'
     
   -  task: TerraformTask@5
      displayName: "terraform init"
      inputs:
        provider: 'azurerm'
        command: 'init'
        backendServiceArm: 'connection_new13oct'
        backendAzureRmStorageAccountName: 'vinodstorgeforstatefile'
        backendAzureRmContainerName: 'vinodcontainerforstatefile'
        backendAzureRmKey: 'pipeline.tfstate'
   
   -  task: TerraformTask@5
      inputs:
        provider: 'azurerm'
        command: 'validate'
   - task: TerraformTask@5
     inputs:
       provider: 'azurerm'
       command: 'plan'
       environmentServiceNameAzureRM: 'connection_new13oct'
   - task: TerraformTask@5
     inputs:
       provider: 'azurerm'
       command: 'apply'
       commandOptions: '-auto-approve'
       environmentServiceNameAzureRM: 'connection_new13oct'

     
